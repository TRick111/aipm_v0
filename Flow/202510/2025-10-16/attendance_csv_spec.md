## 日別勤怠CSV 使用書（シフト表示ダッシュボード向け）

対象ファイル: `Flow/202510/2025-10-16/日別勤怠_202509_202509_1002_1760527799677_q8Wi9.csv`

### 目的
- **誰が・いつ・何時から何時まで出勤していたか**を表示するダッシュボードのデータ定義。
- 休憩は区間（開始/終了）が不明のため、初期版では使用しない（合計休憩時間は参考列として保持可）。

### 最低限必要なフィールド（必須）
- **スタッフ名**: 列名「スタッフ名」
- **雇用形態**: 列名「雇用形態」
- **日付**: 列名「日付」（例: `2025年09月01日(月)`）
- **出勤時刻**: 列名「出勤」（例: `10:45`）
- **退勤時刻**: 列名「退勤」（例: `22:00`）
- **スタッフコード**: 列名「スタッフコード」（名寄せ・JOIN用途）
- **出勤組織**: 列名「出勤組織」（複数店舗運用時のフィルタに有用）

### 出勤日の判定（データから外す条件）
- 出勤した行 = `出勤` と `退勤` の両方に値がある行。
- 上記のどちらか、もしくは両方が空欄の行は「非出勤（除外）」として扱う。
- 例外: 同一スタッフ・同一日で複数行が存在する場合（例: `2025-09-23` に2シフト）→ それぞれを別のシフト区間として保持する。

### 列一覧（概要・型・例・採用可否の方針）
- スキーマの安定化とメンテ性向上のため、列の意味と使用方針を以下に整理。

1) スタッフコード
- 型: string（ゼロ埋め等保持のため文字列扱い）
- 例: `"1009"`
- 用途: 主キーとして使用
- 取扱: 必須

2) スタッフ名
- 型: string
- 例: `"サーラ"`, `"櫻沢　ジュン"`
- 用途: 表示名として使用
- 取扱: 必須

3) 所属組織コード / 所属組織
- 型: string
- 用途: 雇用上の所属。表示には直接不要
- 取扱: 不要（将来の集計で使う可能性があれば保持）

4) 出勤組織コード / 出勤組織
- 型: string
- 例: `"1002"`, `"麻布しき　旗の台店"`
- 用途: 勤務実績の店舗/現場。マルチ店舗のフィルタに有用
- 取扱: 不要

5) 状態
- 型: string
- 用途: システム内部状態（本データでは空欄が多い）
- 取扱: 不要

6) 日付
- 型: string（入力）→ date（正規化）
- 例: `"2025年09月01日(月)"`
- 正規化: `YYYY-MM-DD` に変換（曜日は任意で保持可能）
- 取扱: 必須

7) 休暇 / 休暇種別
- 型: string
- 用途: 休暇管理（本CSVでは多くが空欄）
- 取扱: 任意（当面は不要）

8) 出勤 / 退勤
- 型: string（HH:mm）→ time（正規化）
- 例: `"10:45"`, `"22:00"`
- 用途: シフトの開始/終了時刻
- 取扱: 必須

9) 通常勤務 / 法定内残業 / 普通残業 / 各種割増 / 深夜関連
- 型: duration（HH:mm）
- 用途: 勤怠計算（時間数）
- 取扱: 不要（将来の集計で使用するなら保持）

10) 未承認残業
- 型: duration
- 取扱: 不要

11) 休憩
- 型: duration（例: `"3:00"`）
- 用途: 合計休憩時間（区間は不明）
- 取扱: 任意（区間不明のため初期表示では未使用。将来、労働時間補正の計算に利用可）

12) 遅刻 / 早退 / みなし時間 / 総労働時間
- 型: duration
- 用途: 勤怠管理
- 取扱: 不要（当面）

13) 備考
- 型: string
- 例: `"打刻修正:Wi-Fi破損により登録できず"`
- 用途: 例外の説明
- 取扱: 任意（監査用に保持推奨）

14) 雇用形態
- 型: enum string（例: `"社員"`, `"アルバイト"`）
- 用途: 表示やフィルタ、集計（社員/アルバイト別）
- 取扱: 必須

### 正規化仕様（アプリ側の取り込み時ルール）
- `出勤` / `退勤`:
  - 形式: `HH:mm`（24時間制）。そのまま時刻として扱う。
- 複数シフト/日:
  - 同一スタッフ・同一 `日付` に複数レコードがある場合、それぞれを独立したシフト区間として保持・表示する。
- 休憩:
  - 合計時間のみ（区間不明）。初期版は未使用。

### ダッシュボード用 抽出（例）
- 抽出条件: `出勤` と `退勤` がともに非空。
- 投影カラム:
  - `スタッフコード`
  - `スタッフ名`
  - `雇用形態`
  - `日付`（正規化: `YYYY-MM-DD`）
  - `出勤`（`HH:mm`）
  - `退勤`（`HH:mm`）
  - `出勤組織`（任意）
  - `備考`（任意）


### 既知の注意点
- `出勤組織コード/出勤組織` が空欄の行でも、`出勤/退勤` が空欄であれば非出勤として除外されるため、判定は `出勤/退勤` を優先。



