# 日程管理

## 背景
- 会社カレンダーを社外（Googleカレンダー等）へ出せないため、社外向けの調整では「空いていない時間（busy）」だけを別カレンダーに反映する運用が必要。
- 手動でbusyブロックを作るのは手間が大きく、抜け漏れが起きやすい。AIPM上のプロジェクトから依頼するだけで、外部カレンダーへブロックが入る仕組みがあると運用が安定する。

## 目的
- AIPM上でエージェントに依頼すると、Googleカレンダー等の社外カレンダーに「空いていない時間」をブロックとして登録できる仕組みを作る。
- 会社カレンダーの情報を外に出さずに、必要十分な範囲で日程調整を成立させる（セキュアな運用）。

## ゴール（完了条件）
- MCP等を介して、指定した日時/タイトル/カレンダーに対して「busyブロック（予定）」を自動登録できる。
- ブロック登録の入力フォーマット（例: 期間、タイムゾーン、繰り返し有無、タイトル規約）が定義され、再現性ある運用になっている。
- 依頼ログ（いつ、何を、どこに入れたか）がStockに残り、後追い確認できる。

## 関係者

| 名前 | 役職 | 役割 |
|---|---|---|
| 力久（ユーザー） | - | 要件定義 / 運用者 |

## 現在の状況・ネクストアクション
- 現状: **最小実装完了**（Google Calendar API + OAuth認証でBUSYブロック登録可能）
  - `gcal_busy_blocker/` ツールで単発・毎週・隔週予定を登録できる
  - 入力フォーマット（`request_format.md`）を整備済み
  - 2026-02-10に16件の予定登録を実施し、運用テスト完了
- ネクストアクション:
  - [ ] 運用を継続し、必要に応じて機能追加（例: 一括削除、予定一覧取得）
  - [ ] 他のカレンダーサービス対応の検討（必要になったら）

## 今後のプラン（中期）

| 時期 | 項目 | 備考 |
|---|---|---|
| ✅ 2026-02 | 最小実装（busyブロック登録） | 完了（Google Calendar API + OAuth） |
| ✅ 2026-02 | 入力フォーマット整備・テンプレ化 | 完了（`request_format.md`） |
| ✅ 2026-02 | 繰り返し/一括登録、ログ拡充 | 完了（週次/隔週対応、実行ログあり） |
| 2026-03〜 | 機能拡充（削除/一覧取得など） | 必要に応じて |

## 成果物・ツール

### gcal_busy_blocker
- **場所**: `Stock/定型作業/日程管理/gcal_busy_blocker/`
- **機能**: Google Calendar API（OAuth）で`work`カレンダーにBUSY予定を登録
- **対応**: 単発予定、毎週予定、隔週予定、平日予定（月〜金）
- **使い方**: `gcal_busy_blocker/README.md` 参照

### request_format.md
- **場所**: `Stock/定型作業/日程管理/request_format.md`
- **内容**: BUSYブロック登録の依頼テンプレート（YAML形式）

## 重要リンク（外部）

| 名称 | URL | 備考 |
|---|---|---|
| Google Calendar API | <https://developers.google.com/calendar> | 公式ドキュメント |
